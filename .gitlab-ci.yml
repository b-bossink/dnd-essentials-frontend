
workflow:
  rules:
    - if: $CI_COMMIT_BRANCH == "main"

stages:
  - setup
  - test
  - build

install:
  stage: setup
  script: 
    - npm ci

# unit_tests:
#   stage: test
#   image: 
#   script:
#     - dotnet test

# end_to_end_tests:
#   stage: test
#   image:
#   script:
#     - npx cypress run

# build_image:
#   stage: build
#   image: docker:20.10.18
#   services:
#     - docker:20.10.18-dind
#   variables:
#     DOCKER_TLS_CERTDIR: "/certs"
#   before_script:
#     - docker login -u $DOCKER_USER -p $DOCKER_PASSWORD
#   script:
#     - docker build -t $IMAGE_NAME:$IMAGE_TAG .
#     - docker push $IMAGE_NAME:$IMAGE_TAG